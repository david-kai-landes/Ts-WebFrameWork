{"version":3,"sources":["src/modals/model.ts","src/modals/User.ts","src/index.ts"],"names":[],"mappings":";;;;;;AEAA,IAAA,MAAA,GAAA,OAAA,CAAA,eAAA,CAAA;AFsBA,IAAA,KAAA;AEpBA,AFoBA,IEpBM,IAAI,GAAG,IAAI,MAAA,CAAA,IAAJ,CAAS;AFoBtB,EEpBwB,EAAE,EAAE,MFoB5B;AEpBsB,CAAT,CAAb,AFqBE,SAAA,KAAA,CACU,UADV,EAEU,MAFV,EAGU,IAHV,EAGuB;AEtBzB,IAAI,AFoBQ,CEpBP,EAAL,CAAQ,CFoBI,KEpBZ,EAAgB,GFoBJ,GAAA,MEpBI,IFoBJ;EEnBV,EFoBU,KEpBH,AFoBG,CEpBF,GAAR,CAAY,CFoBF,GEpBV,AFoBU,MAAA;AEnBX,CAFD,GFsBY,KAAA,IAAA,GAAA,IAAA;AElBZ,EFmBM,EEnBF,CAAC,IAAL;;EFqBE,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,IAAJ,EAAM;SAAN,eAAA;MACE,OAAO,KAAK,MAAL,CAAY,EAAnB;IACD,CAFK;qBAAA;;EAAA,CAAN;EAIA,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,SAAJ,EAAW;SAAX,eAAA;MACE,OAAO,KAAK,MAAL,CAAY,OAAnB;IACD,CAFU;qBAAA;;EAAA,CAAX;EAIA,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,KAAJ,EAAO;SAAP,eAAA;MACE,OAAO,KAAK,UAAL,CAAgB,GAAvB;IACD,CAFM;qBAAA;ACrCT,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;EDqCS,CAAP;AC7BF,IAAM,OAAO,GAAG,6BAAhB;EDiCE,KAAA,CAAA,SAAA,CAAA,GAAA,GAAA,UAAI,MAAJ,EAAa;AC/Bf,IAAA,ADgCI,IChCJ,CDgCS,UAAL,CAAgB,GAAhB,CAAoB,MAApB;AChCJ,IDiCI,KAAK,MAAL,CAAY,OAAZ,CAAoB,QAApB;ACjCJ,EDkCG,CAHD,OC/BF,MAAA,EAAA;EAA0B,SAAA,CAAA,IAAA,EAAA,MAAA,CAAA;EDoCxB,KAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;ECpCF,EDoCE,IAAA,GCpCF,EDoCE,ECpCF,CDoCE,ECpCF,EDoCE;;ECpC2C,EDqCzC,IAAM,EAAE,GAAG,KAAK,GAAL,CAAS,IAAT,CAAX;;ECrCwC,EDuCxC,IAAI,CCvCoC,IAAA,EDuC7B,EAAP,KAAc,QAAlB,EAA4B;ACvChC,CAAA,CAA0B,IDwCpB,GCxCoB,CAAA,EDwCd,GCxCZ,CAAA,ADwCgB,KAAJ,CAAU,4BAAV,CAAN;IACD;ACzCQ,OAAA,CAAA,IAAA,GAAA,IAAA;ID2CT,KAAK,IAAL,CAAU,KAAV,CAAgB,EAAhB,EAAoB,IAApB,CAAyB,UAAC,QAAD,EAAwB;MAC/C,KAAI,CAAC,UAAL,CAAgB,GAAhB,CAAoB,QAAQ,CAAC,IAA7B;IACD,CAFD;EAGD,CAVD;;EAYA,KAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;IAAA,IAAA,KAAA,GAAA,IAAA;;IACE,KAAK,IAAL,CACG,IADH,CACQ,KAAK,UAAL,CAAgB,MAAhB,EADR,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAwB;MAC5B,KAAI,CAAC,OAAL,CAAa,MAAb;IACD,CAJH,EAKG,KALH,CAKS,YAAA;MACL,KAAI,CAAC,OAAL,CAAa,OAAb;IACD,CAPH;EAQD,CATD;;EAUF,OAAA,KAAA;AA9CA,CAAA,EAAA;;AAAa,OAAA,CAAA,KAAA,GAAA,KAAA","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["import { AxiosPromise, AxiosResponse } from \"axios\";\r\n\r\ninterface ModelAttributes<T> {\r\n  set(value: T): void;\r\n  getAll(): T;\r\n  get<K extends keyof T>(key: K): T[K];\r\n}\r\n\r\ninterface Sync<T> {\r\n  fetch(id: number): AxiosPromise;\r\n  save(data: T): AxiosPromise;\r\n}\r\n\r\ninterface Events {\r\n  on(eventName: string, callback: () => void): void;\r\n  trigger(eventName: string): void;\r\n}\r\n\r\ninterface HasId {\r\n  id?: number;\r\n}\r\n\r\nexport class Model<T extends HasId> {\r\n  constructor(\r\n    private attributes: ModelAttributes<T>,\r\n    private events: Events,\r\n    private sync: Sync<T>\r\n  ) {}\r\n\r\n  get on() {\r\n    return this.events.on;\r\n  }\r\n\r\n  get trigger() {\r\n    return this.events.trigger;\r\n  }\r\n\r\n  get get() {\r\n    return this.attributes.get;\r\n  }\r\n\r\n  set(update: T): void {\r\n    this.attributes.set(update);\r\n    this.events.trigger(\"change\");\r\n  }\r\n\r\n  fetch(): void {\r\n    const id = this.get(\"id\");\r\n\r\n    if (typeof id !== \"number\") {\r\n      throw new Error(\"Cannot Fetch Without an ID\");\r\n    }\r\n\r\n    this.sync.fetch(id).then((response: AxiosResponse): void => {\r\n      this.attributes.set(response.data);\r\n    });\r\n  }\r\n\r\n  save(): void {\r\n    this.sync\r\n      .save(this.attributes.getAll())\r\n      .then((response: AxiosResponse): void => {\r\n        this.trigger(\"save\");\r\n      })\r\n      .catch(() => {\r\n        this.trigger(\"Error\");\r\n      });\r\n  }\r\n}\r\n","import { Model } from \"./model\";\r\n\r\nexport interface UserProps {\r\n  id?: number;\r\n  name?: string;\r\n  age?: number;\r\n}\r\n\r\nconst rootUrl = \"http://localhost:3000/users\";\r\n\r\nexport class User extends Model<UserProps> {}\r\n","import { User } from \"./modals/User\";\r\n\r\nconst user = new User({ id: 1 });\r\n\r\nuser.on(\"save\", () => {\r\n  console.log(user);\r\n});\r\n\r\nuser.save();\r\n"]}